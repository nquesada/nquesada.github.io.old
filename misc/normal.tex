\documentclass[english,12pt]{shreyasnotes}
\date{}

\title{The normal ordered form of $\left(a+a^{\dagger}\right)^n$}
\author{Nicol\'as Quesada}

\begin{document}
\maketitle
\thispagestyle{empty}

To find the normal ordered form of $(a+a^{\dagger})^n$ one uses the  Baker-Campbell-Hausdorff formula,
\begin{align}
e^{t(X+Y)}= e^{tX}~  e^{tY} ~e^{-\frac{t^2}{2} [X,Y]},
\end{align}
to find a generating function. Taking $X=a^{\dagger}$ and $Y=a$ and noticing that $[a,a^{\dagger}]=1$ one obtains
\begin{align}
e^{t(a+a^{\dagger})}=e^{ t a^{\dagger}} e^{t a} e^{\frac{t^2}{2}}.
\end{align}
Now we can expand each exponential. The left hand side simply reads
\begin{align}
\sum_{n=0}^{\infty}\frac{t^n}{n!}\left(a+a^{\dagger} \right)^n,
\end{align}
whereas the right side takes the form
\begin{align}
 \sum_{i=0}^{\infty} \sum_{m=0}^{\infty}  \sum_{k=0}^{\infty} \frac{t^{2i+m+k}}{2^i i! m! k!} (a^{\dagger})^m (a)^k.
\end{align}
To obtain the desired expression take $n=2i+m+k, (i=\frac{n-m-k}{2})$ and rewrite the last expression
\begin{align}
\sum_{n=0}^{\infty} t^n \sum_{m=0}^n  {\sum_{k=0}^{n-m}}{'} \frac{(a^{\dagger})^m (a)^k}{2^{\frac{n-m-k}{2}}\left(\frac{n-m-k}{2}\right)! m! k! },
\end{align}
where ${\sum_{k=0}^{n-m}}{'}$ means that $k$ takes only the values that make $n-m-k=2 i$ even. Equating
powers of $t^n$ one arrives to the desired formula
\begin{align}
\left(a+a^{\dagger} \right)^n = n! \sum_{m=0}^n  {\sum_{k=0}^{n-m}}{'} \frac{(a^{\dagger})^m (a)^k}{2^{\frac{n-m-k}{2}}\left(\frac{n-m-k}{2}\right)! m! k! }.
\end{align}
The first few nontrivial evaluations yield
\begin{subequations}
\begin{align}
\left(a+a^{\dagger} \right)^2 &=  a^2 +2 a^{\dagger}a+\left(a^{\dagger }\right)^2+1. \\
\left(a+a^{\dagger} \right)^3 &= a^3+3 \left(a^{\dagger
   }\right)^2 a +3 a^{\dagger}a^2+\left(a^{\dagger }\right)^3+3 a^{\dagger } +3 a .\\
\left(a+a^{\dagger} \right)^4 &= a^4+4 a^{\dagger }a^3+6 \left(a^{\dagger }\right)^2 a^2+4\left(a^{\dagger }\right)^3 a+\left(a^{\dagger }\right)^4+12 a^{\dagger}a+6\left(a^{\dagger }\right)^2+6 a^2+3.
\end{align}
\end{subequations}
To obtain the anti-normal ordered form of $\left(a+a^{\dagger} \right)^n$ simply take $X=a$ and $Y=a^{\dagger}$.\\ This function written in \emph{Mathematica} generates the normal ordered form for arbitrary $n$
\begin{footnotesize}
\begin{verbatim}
NormalOrder[n_Integer] := 
(Sum[(n!/(2^((n - m - k)/2)*((n - m - k)/2)!*k!*m!))*SuperDagger[a]^m ** a^k * 
If[EvenQ[n - m - k], 1, 0], {m, 0, n}, {k, 0, n - m}] /. {1 ** a_ -> a, a_ ** 1 -> a})
\end{verbatim}
\end{footnotesize}



\end{document}

